<!DOCTYPE html>
<html>
<head>
    <title>Tap Out</title>
    <script>
        window.onload = function () {
            // Get card_id from URL parameters
            const urlParams = new URLSearchParams(window.location.search);
            const cardId = urlParams.get('card_id');
            if (cardId) {
                document.getElementById('card_id').value = cardId;
            }

            // Get GPS location
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(function (position) {
                    document.getElementById('lat').value = position.coords.latitude;
                    document.getElementById('lon').value = position.coords.longitude;
                }, function (error) {
                    alert('Error getting GPS location: ' + error.message);
                });
            } else {
                alert('Geolocation is not supported by this browser.');
            }
        };
    </script>
</head>
<body>
    <h2>üöç Tap Out</h2>
    <form method="POST">
        <input type="hidden" id="card_id" name="card_id" value="">
        <input type="hidden" id="lat" name="lat" value="">
        <input type="hidden" id="lon" name="lon" value="">
        <button type="submit">Complete Trip</button>
    </form>
</body>
</html>
